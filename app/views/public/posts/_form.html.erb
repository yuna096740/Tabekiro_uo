<%= form_with model: post do |f| %>
  <%= render "layouts/errors", model: f.object %>
  <div class="row mt-3">
    <div class="col-md-6">
      <% if post.id == nil %>
        <h4>お裾分け準備</h4>
      <% else %>
        <h4>お裾分け編集</h4>
      <% end %>

      <table class="table table-borderless">
        <tbody>
          <% unless post.id == nil %>
            <tr>
              <th></th>
              <td class="text-center">
                <%= image_tag @post.get_post_image(150,100), class:"rounded" %>
              </td>
            </tr>

            <tr>
              <th>画像 :</th>
              <td><%= f.file_field :post_image %></td>
            </tr>
          <% else %>
            <tr>
              <th>画像 :</th>
              <td><%= f.file_field :post_image, required: true %></td>
            </tr>
          <% end %>

          <tr>
            <th>タイトル :</th>
            <td><%= f.text_field :title, placeholder: "入力してください", required: true, class:"form-control" %></td>
          </tr>

          <tr>
            <th>紹介 :</th>
            <td><%= f.text_area :introduction, rows: "3", placeholder: "入力してください", required: true, class:"form-control" %></td>
          </tr>

          <tr>
            <th>お魚ジャンル :</th>
            <td><%= f.collection_select :tag_id, tags, :id, :name, {}, {class:"form-control col-6"} %></td>
          </tr>

          <tr>
            <th>期限 :</th>
            <td><div class="d-flex"><%= f.select :limit, *[1..24], {}, class:"form-control col-6" %><p class="mt-3 ml-1">時間</p></div></td>
          </tr>

          <tr>
            <th>ステータス :</th>
            <td><%= f.select :open_status, Post.open_statuses_i18n.invert, {}, {class:"form-control col-6"} %></td>
          </tr>
        </tbody>
      </table>

    </div>

    <div class="col-md-6 mt-5">
      <div id="map" class="mapForm"></div>
      <p class="mt-1">
        ※ 検索をするとピンが刺さります。<br>
        ※ マーカー位置の調整ができます。
      </p>

      <div class="d-flex">
        <%= f.hidden_field :latitude, id: :latitude %>
        <%= f.hidden_field :longitube, id: :longitube %>
      </div>

      <div class="d-flex">
        <input id="address" type="textbox" value="Tokyo" class="form-control col-8">
        <input type="button" value="ピンを刺す" onclick="codeAddress()" class="form-control ml-4 btn btn-info rounded-pill">
      </div>

      <%= f.text_field :place_name, placeholder: "登録する地名を入力", required: true, class:"form-control my-3" %>

    </div>
    <div class="mx-auto">
      <div class="mt-5">
        <% if post.id == nil %>
          <%= f.submit '投稿する', class:"btn btn-success px-5 rounded-pill" %>
        <% else %>
          <%= f.submit '変更する', class:"btn btn-danger px-5 rounded-pill" %>
        <% end %>
      </div>
    </div>
  </div>
<% end %>
<%# Google Map API %>
<%= render 'public/posts/js_template/newGoogleMap' %>
<script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['API_KEY'] %>&libraries=places&callback=initMap" async defer></script>